(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{32:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var c=a(0),r=a(15),s=a.n(r),n=a(3),i=(a(32),a(6)),l=a.n(i),o=a(9),b=a(10),d=a.n(b),j=a(2),u=a(1),m=function(e){var t=e.setCinema,a=e.setLogged,r=Object(c.useRef)(""),s=Object(c.useRef)(""),n=Object(j.f)(),i=function(){var e=Object(o.a)(l.a.mark((function e(c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),r.current.value,s.current.value,r&&s){e.next=6;break}return alert("campi vuoti"),e.abrupt("return");case 6:return e.prev=6,e.next=9,d.a.post("http://localhost:3001/",{username:r.current.value,password:s.current.value}).then((function(e){return t(e.data),a(!0),n("/tracing")})).catch((function(e){alert(e.response.data),r.current.focus(),r.current.value="",s.current.value=""}));case 9:e.sent,e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(6),alert(e.t0),e.abrupt("return");case 16:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){})),Object(u.jsx)("div",{className:"container-fluid",children:Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col-md-4 offset-md-4",children:Object(u.jsxs)("div",{className:"login-form bg-light mt-4 p-4",children:[Object(u.jsxs)("form",{className:"row g-3",onSubmit:i,children:[Object(u.jsx)("h4",{children:"Login for start to tracing"}),Object(u.jsxs)("div",{className:"col-12",children:[Object(u.jsx)("label",{children:"Username"}),Object(u.jsx)("input",{type:"text",name:"username",className:"form-control",placeholder:"Username",ref:r})]}),Object(u.jsxs)("div",{className:"col-12",children:[Object(u.jsx)("label",{children:"Password"}),Object(u.jsx)("input",{type:"password",name:"password",className:"form-control",placeholder:"Password",ref:s})]}),Object(u.jsx)("div",{className:"col-12",children:Object(u.jsx)("button",{type:"submit",className:"btn btn-dark float-end",children:"Login"})})]}),Object(u.jsx)("hr",{className:"mt-4"}),Object(u.jsx)("div",{className:"col-6",children:Object(u.jsx)("p",{className:"text-end mb-0 fs-6",children:"dev by Fabio Conti"})})]})})})})},O=a(16),p=function(e){var t=e.num,a=e.nome;return Object(u.jsx)("div",{className:"accordion accordion",id:"accordionFlushExample",children:Object(u.jsxs)("div",{className:"accordion-item",children:[Object(u.jsx)("h2",{className:"accordion-header",id:"flush-headingOne",children:Object(u.jsx)("button",{className:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",tabIndex:"-1",children:Object(u.jsx)("p",{children:"in caso di registrazione senza codice fiscale..."})})}),Object(u.jsxs)("div",{id:"collapseOne",className:"accordion-collapse collapse px-2","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:[Object(u.jsx)("input",{type:"text",ref:a,name:"name",className:"form-control my-2",placeholder:"NOME E COGNOME"}),Object(u.jsx)("input",{type:"text",name:"phoneNumber",ref:t,className:"form-control my-2",placeholder:"NUMERO DI TELEFONO"})]})]})})},h=a(18),x=a(7);a(27);var g=function(e){var t=e.registration,a=e.reg,r=e.setRegistrer,s=Object(c.useState)("select"),i=Object(n.a)(s,2),b=i[0],j=i[1],m=function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d.a.delete("http://localhost:3001/tracing",{data:{codTicket:b}}).then(x.b.success("eliminazione dal db avvenuta",{position:"bottom-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})).catch((function(e){return alert(e.response.data)}));case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert("error axios tracing",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),p=a.onDb?Object(u.jsxs)("span",{children:[Object(u.jsxs)("span",{className:"fs-6",children:[" ticket: ",a.ticket]}),Object(u.jsxs)("span",{children:[" date: ",a.date]})]}):Object(u.jsxs)("span",{children:[Object(u.jsxs)("span",{className:"fs-6",children:[Object(u.jsxs)("del",{children:["ticket: ",a.ticket," "]})," "]}),Object(u.jsxs)("span",{children:[" ",Object(u.jsxs)("del",{children:[" date: ",a.date]})]})]});return Object(u.jsxs)("div",{children:[Object(u.jsx)("form",{onSubmit:m,children:Object(u.jsxs)("li",{className:"list-group-item d-flex justify-content-between",children:[p,Object(u.jsx)("button",{type:"submit",className:"btn btn-danger btn-sm",onClick:function(){j(a.ticket);var e=Object(O.a)(t);e[a.count]=Object(h.a)(Object(h.a)({},a),{},{onDb:!1}),r(e)},children:Object(u.jsx)("i",{className:"bi bi-trash"})})]})}),Object(u.jsx)(x.a,{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})},v=function(e){var t=e.registration,a=e.setRegistrer;return Object(u.jsx)("ul",{className:"list-group list-group-flush",children:t.map((function(e,c){return Object(u.jsx)(g,{registration:t,reg:e,setRegistrer:a},c)}))})},f=function(e){var t=e.cinema,a=Object(c.useRef)(""),r=Object(c.useRef)(""),s=Object(c.useRef)(""),i=Object(c.useRef)(),b=Object(c.useState)(0),j=Object(n.a)(b,2),m=j[0],h=j[1],g=Object(c.useState)([]),f=Object(n.a)(g,2),N=f[0],k=f[1],C=function(){var e=Object(o.a)(l.a.mark((function e(c){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),t){e.next=4;break}return alert("fai prima il login grazie"),e.abrupt("return");case 4:if(a.current.value||s.current.value||i.current.value){e.next=7;break}return x.b.error("inserire codice fiscale o nome, cognome e numero di telefono",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.abrupt("return");case 7:if(r.current.value){e.next=10;break}return x.b.error("si deve inserire il codice biglietto",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.abrupt("return");case 10:return e.prev=10,e.next=13,d.a.post("http://localhost:3001/tracing",{registration:{cinema:t,fiscale:a.current.value,nameClient:s.current.value,numberPhone:i.current.value,ticket:r.current.value,date:(new Date).toLocaleString()+""}}).then((function(e){e.data?x.b.success("registrazione avvenuta",{position:"bottom-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):alert("qualcosa \xe8 andato storto. Riprova")})).catch((function(e){return alert(e.response.data)}));case 13:e.sent,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),alert("error axios tracing",e.t0);case 19:h(m+1),(n=Object(O.a)(N))[m]={fiscale:a.current.value,nameClient:s.current.value,numberPhone:i.current.value,ticket:r.current.value,count:m,date:(new Date).toLocaleString()+"",onDb:!0},k(n),2===m&&h(0);case 24:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){}),[]),Object(u.jsxs)("div",{className:"container-fluid",children:[Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col-md-8 offset-md-2",children:Object(u.jsxs)("div",{className:"login-form bg-light mt-4 p-4",children:[Object(u.jsxs)("form",{className:"row g-3",onSubmit:C,children:[Object(u.jsx)("h4",{children:"Tracing"}),Object(u.jsx)("div",{className:"col",children:Object(u.jsx)("input",{className:"form-control",type:"text",value:t,"aria-label":"Disabled input example",disabled:!0})}),Object(u.jsx)("div",{className:"col-12",children:Object(u.jsx)("input",{type:"text",ref:a,tabIndex:"0",name:"codFisc",className:"form-control",placeholder:"CODICE FISCALE"})}),Object(u.jsx)("div",{className:"col-12",children:Object(u.jsx)(p,{num:i,nome:s})}),Object(u.jsx)("div",{className:"col-12",children:Object(u.jsx)("input",{type:"ticket",name:"ticket",tabIndex:"1",ref:r,className:"form-control",placeholder:"TICKET"})}),Object(u.jsx)("div",{className:"col-12",children:Object(u.jsx)("input",{name:"date",className:"form-control","aria-label":"Disabled input example",placeholder:"date",value:(new Date).toLocaleString()+"",disabled:!0})}),Object(u.jsx)("div",{className:"col-12 d-flex justify-content-center",children:Object(u.jsx)("button",{type:"submit",className:"btn btn-dark",children:"Register"})})]}),Object(u.jsx)("hr",{}),Object(u.jsx)(v,{registration:N,setRegistrer:k}),Object(u.jsx)("hr",{className:"mt-4"}),Object(u.jsx)("div",{className:"col-12",children:Object(u.jsx)("p",{className:"text-center mb-0",children:"dev by Fabio Conti"})})]})})}),Object(u.jsx)(x.a,{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})},N=a(11),k=function(e){var t=e.isLogged,a=function(){return t?Object(u.jsx)("li",{className:"nav-item m-2",children:Object(u.jsx)(N.b,{to:"/tracing",children:"Tracing "})}):Object(u.jsx)("li",{className:"nav-item m-2",children:"loggati"})};return Object(u.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:Object(u.jsxs)("div",{className:"container-fluid",children:[Object(u.jsx)("a",{className:"navbar-brand",children:"TRACING"}),Object(u.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(u.jsx)("span",{className:"navbar-toggler-icon"})}),Object(u.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(u.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(u.jsx)("li",{className:"nav-item m-2",children:Object(u.jsx)(N.b,{to:"/login",children:"Login"})}),Object(u.jsx)(a,{})]})})]})})};function C(){var e=Object(c.useState)(""),t=Object(n.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(!1),i=Object(n.a)(s,2),l=i[0],o=i[1];return Object(u.jsx)("div",{children:Object(u.jsx)("div",{className:"container-fluid",children:Object(u.jsxs)(N.a,{children:[Object(u.jsx)(k,{isLogged:l}),Object(u.jsxs)(j.c,{children:[Object(u.jsx)(j.a,{path:"/",element:Object(u.jsx)(m,{setCinema:r,setLogged:o})}),Object(u.jsx)(j.a,{path:"login",element:Object(u.jsx)(m,{setCinema:r,setLogged:o})}),Object(u.jsx)(j.a,{path:"tracing",element:Object(u.jsx)(f,{cinema:a})}),Object(u.jsx)(j.a,{path:"*",element:Object(u.jsx)("main",{style:{padding:"1rem"},children:Object(u.jsx)("p",{children:"There's nothing here!"})})})]})]})})})}s.a.render(Object(u.jsx)(C,{}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.06f9add0.chunk.js.map